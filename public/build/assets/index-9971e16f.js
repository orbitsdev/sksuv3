import{i as d,p as I,q as U,o as s,a as c,F as w,m as C,t as v,v as G,j as H,O as y,d as r,w as t,b as e,k as b,l as P,c as S,e as h,f as x,z as q,u as A,r as p}from"./app-7faee9a2.js";import{l as L}from"./lodash-444c3020.js";import{a as V}from"./adminlayout-baa1c617.js";const J=["value"],K={key:1,class:"p-2 rounded bg-rose-600 animate-pulse text-white"},Q={},B=Object.assign(Q,{__name:"SelectRoles",emits:["selectItem","setDefaultValue"],setup(k,{emit:f}){const a=d([]);I(async()=>{const{data:u}=await U.get(route("public.guestandosas"));u.data.length>0&&(a.value=u.data,f("setDefaultValue",a.value[0].id))});function _(u){f("selectItem",parseInt(u.target.value))}return(u,i)=>a.value.length>0?(s(),c("select",{key:0,onChange:i[0]||(i[0]=l=>_(l)),autocomplete:"country-name",class:"block w-full max-w-lg h-10 px-2 rounded-md border shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm"},[(s(!0),c(w,null,C(a.value,l=>(s(),c("option",{key:l.id,value:l.id},v(l.name),9,J))),128))],32)):(s(),c("div",K," Empty"))}}),W={class:"mx-auto w-full max-w-xs lg:max-w-md"},X=e("label",{for:"search",class:"sr-only"},"Search",-1),Y={class:"relative text-white focus-within:text-gray-600"},Z=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1),ee={class:"bg-white rounded-xl shadow-xl mx-auto max-w-3xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},te={class:"pt-4 flex items-center justify-end"},se=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 mr-2"},[e("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z"}),e("path",{d:"M5.25 5.25a3 3 0 00-3 3v10.5a3 3 0 003 3h10.5a3 3 0 003-3V13.5a.75.75 0 00-1.5 0v5.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V8.25a1.5 1.5 0 011.5-1.5h5.25a.75.75 0 000-1.5H5.25z"})],-1),ae=["value"],le={key:0},oe={key:0,class:"mt-6 py-4 bg-white"},ne={class:"p-2"},re={class:"sm:flex sm:items-start"},ue={class:"mt-5 w-full flex justify-end sm:flex-row-reverse"},ce={components:{adminlayout:V,SelectRoles:B}},_e=Object.assign(ce,{__name:"index",props:{users:Object,filters:Object},setup(k){const f=k,a=d(!1),_=d(!1);d(null),d(!1),d(null);const u=d(f.filters.search),i=d([]),l=G({role_id:null,user_id:null});function O(o){l.role_id=o}function j(o){o!=null&&(l.role_id=o)}H(u,L.throttle(o=>{y.get(route("account.userpassword.index"),{search:o},{preserveState:!0,replace:!0})},500));function M(){a.value=!0}async function $(){_.value=!0,y.post(route("superadmin.changeuserroles"),{role_id:l.role_id,user_ids:i.value},{preserveState:!0,replace:!0,onSuccess:()=>{a.value=!1,_.value=!1,l.reset(),i.value=[]},onFinish:()=>{a.value=!1,_.value=!1}})}return(o,m)=>{const R=p("sk-button2"),g=p("Tcell"),z=p("SkTable"),D=p("Pagination"),N=p("SkButton"),T=p("SkButtonGray"),E=p("sk-dialog");return s(),c(w,null,[r(V,null,{search:t(()=>[e("div",W,[X,e("div",Y,[Z,b(e("input",{"onUpdate:modelValue":m[0]||(m[0]=n=>u.value=n),class:"block w-full rounded-md border border-transparent bg-white bg-opacity-20 py-2 pl-10 pr-3 leading-5 text-white placeholder-white focus:border-transparent focus:bg-opacity-100 focus:text-gray-900 focus:placeholder-gray-500 focus:outline-none focus:ring-0 sm:text-sm",placeholder:"Name, Email",type:"search",name:"search"},null,512),[[P,u.value,void 0,{number:!0}]])])])]),default:t(()=>[e("div",ee,[e("div",te,[i.value.length>0?(s(),S(R,{key:0,onClick:M,c:"bg-white border ",class:"w-40 flex items-center justify-center mr-2 h-10"},{default:t(()=>[se,h(" Change Role ")]),_:1})):x("",!0)]),r(z,{headers:["Name","Email","Role"]},{default:t(()=>[(s(!0),c(w,null,C(A(f).users.data,n=>(s(),c("tr",{class:"divide-x divide-gray-200",key:n},[r(g,{c:"whitespace-nowrap align-center text-center text-sm items-center  font-medium text-gray-900"},{default:t(()=>[b(e("input",{"onUpdate:modelValue":m[1]||(m[1]=F=>i.value=F),value:n.id,type:"checkbox",class:"h-4 w-4 accent-green-600 text-white rounded border-gray-200"},null,8,ae),[[q,i.value]])]),_:2},1024),r(g,{class:"uppercase"},{default:t(()=>[h(v(n.first_name)+" - "+v(n.last_name),1)]),_:2},1024),r(g,null,{default:t(()=>[h(v(n.email),1)]),_:2},1024),r(g,null,{default:t(()=>[n.roles.length>0?(s(),c("div",le,v(n.roles[0].name),1)):x("",!0)]),_:2},1024)]))),128))]),_:1}),o.$props.users.links.length>0?(s(),c("div",oe,[o.$props.users.data.length>0?(s(),S(D,{key:0,class:"block",links:o.$props.users.links},null,8,["links"])):x("",!0)])):x("",!0)])]),_:1}),r(E,{transition:"slide-down",persistent:!0,isOpen:a.value},{default:t(()=>[e("main",ne,[r(B,{onSelectItem:O,onSetDefaultValue:j}),e("div",re,[e("div",ue,[r(N,{onClick:$,processing:_.value,class:"w-24"},{default:t(()=>[h(" Update ")]),_:1},8,["processing"]),r(T,{onClick:m[2]||(m[2]=n=>a.value=!1),c:"w-24 mr-2"},{default:t(()=>[h(" Cancel ")]),_:1})])])])]),_:1},8,["isOpen"])],64)}}});export{_e as default};
