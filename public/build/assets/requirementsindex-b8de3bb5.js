import{i as m,v as D,o as s,a as r,b as e,u,t as y,f as v,F as b,B as ee,j as te,O as j,d as a,w as o,k as U,l as se,c as w,e as _,m as $,z as le,r as d}from"./app-7d944f90.js";import{l as oe}from"./lodash-0f52f8ae.js";import{a as H}from"./adminlayout-3fad6a20.js";import{_ as ne}from"./schoolYearSelect-1d5935af.js";const ae=["value"],re={},N=Object.assign(re,{__name:"UploadTemplate",props:{model_id:Number},emits:"uploadSuccess",setup(M,{emit:h}){const k=M;m([]);const i=D({model_id:k.model_id,name:null,file:null});function g(x){i.file=x.target.files[0],i.post(route("uploadTemplate"),{preserveState:!0,onStart:()=>{h("uploadStart")},onSuccess:()=>{h("uploadSuccess")},onFinish:()=>{h("uploadFinish")}})}return(x,f)=>(s(),r(b,null,[e("input",{onChange:g,class:"block p-2 w-full mb-5 text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none dark:placeholder-gray-400",type:"file"},null,32),u(i).progress?(s(),r("progress",{key:0,value:u(i).progress.percentage,max:"100"},y(u(i).progress.percentage)+"% ",9,ae)):v("",!0)],64))}}),ie={class:"mx-auto w-full max-w-xs lg:max-w-md"},ce=e("label",{for:"search",class:"sr-only"},"Search",-1),de={class:"relative text-white focus-within:text-gray-600"},ue=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"eveanodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])],-1),me={class:"bg-white rounded-xl shadow-xl mx-auto max-w-3xl px-4 sm:px-6 lg:max-w-7xl lg:px-8"},pe={class:"pt-4 flex items-center justify-between"},_e=e("p",{class:"text-xl text-green-800 font-bold font-rubik uppercase"}," Manage Requirements ",-1),he={class:"flex items-center"},fe=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 mr-2 text-rose-700"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z","clip-rule":"evenodd"})],-1),ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 mr-2"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})],-1),ge=["value"],xe={key:0},we=["file"],ke=["href"],ye=e("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})],-1),be={class:"text-ellipsis"},Se={key:1,class:"uppercase"},Ce=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 mr-2"},[e("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z"}),e("path",{d:"M5.25 5.25a3 3 0 00-3 3v10.5a3 3 0 003 3h10.5a3 3 0 003-3V13.5a.75.75 0 00-1.5 0v5.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V8.25a1.5 1.5 0 011.5-1.5h5.25a.75.75 0 000-1.5H5.25z"})],-1),Be=e("span",{class:""}," Update ",-1),Me={key:2,class:"mt-6 py-4 bg-white"},qe={class:"p-2"},ze={class:"mb-2"},je=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Requirement Name",-1),$e={class:"mt-1"},Te={key:0,class:"text-red-700 text-sm"},Ve={key:0},Fe={class:"my=2"},Oe=["onClick"],Ue={class:"mr-5 mt-px"},Ne=e("div",{class:"absolute top-1 right-1 mx-px mt-[0.5px] w-max rounded-md bg-rose-800 transition-colors hover:bg-rose-900","data-dismissible-target":"chip"},[e("div",{role:"button",class:"h-5 w-5 p-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"3"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])])],-1),De={key:1},He=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Template",-1),Ae={class:"mt-1"},Ee={class:"mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3"},Le={class:"p-2"},Re=e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])]),e("div",{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Delete requirements "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Are you sure you want to delete campus/es ? All of your data will be permanently removed from our servers forever. This action cannot be undone. ")])])],-1),Ge={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Pe={class:"flex items-center justify-center"},Ye=e("p",{class:""},"Updating",-1),Ie={components:{schoolYearSelect:ne,adminlayout:H}},Xe=Object.assign(Ie,{__name:"requirementsindex",props:{requirements:Object,filters:Object},setup(M){const h=M,k=m(h.filters.search),i=m(!1),g=m(!1),x=m(!1),f=m([]),T=m(null),q=m(null),S=m(!1),t=D({name:"",temporary_uploaded_file:"",id:null,files:[]});ee({UploadTemplate:N}),te(k,oe.throttle(l=>{j.get(route("requirement.index"),{search:l},{preserveState:!0,replace:!0})},500));function A(){t.name="",T.value=null,t.id=null,i.value=!0}function E(l){t.name=l.name,t.id=l.id,i.value=!0,t.files=l.files}function L(){t.files=[],i.value=!1}function R(l){j.post(route("deleteTemplate"),{file_id:l.id},{onSuccess:()=>{C()},onStart:()=>{S.value=!0},onFinish:()=>{C()}})}function G(){t.post(route("requirement.create"),{preserveState:!0,onSuccess:()=>{i.value=!1,t.reset()},onError:l=>{q.value=l}})}function P(){t.post(route("requirement.update"),{preserveState:!0,onSuccess:()=>{t.id=null,i.value=!1,t.reset()},onError:l=>{q.value=l}})}async function Y(){T.value=null,x.value=!0;try{const l=await j.post(route("requirement.deleteselected"),{ids:f.value});t.name="",g.value=!1,f.value=[]}catch(l){q.value=l.message}finally{x.value=!1}}function C(){S.value=!1,i.value=!1}return(l,c)=>{const V=d("sk-button2"),B=d("Tcell"),z=d("SkButtonGray"),I=d("SkTable"),J=d("EmptyCard"),K=d("Pagination"),Q=d("Authfield1"),F=d("SkButton"),O=d("sk-dialog"),W=d("SkDeleteButton"),X=d("w-progress"),Z=d("SkDialog");return s(),r(b,null,[a(H,null,{search:o(()=>[e("div",ie,[ce,e("div",de,[ue,U(e("input",{"onUpdate:modelValue":c[0]||(c[0]=n=>k.value=n),class:"block w-full rounded-md border border-transparent bg-white bg-opacity-20 py-2 pl-10 pr-3 leading-5 text-white placeholder-white focus:border-transparent focus:bg-opacity-100 focus:text-gray-900 focus:placeholder-gray-500 focus:outline-none focus:ring-0 sm:text-sm",placeholder:"Name ",type:"search",name:"search"},null,512),[[se,k.value,void 0,{number:!0}]])])])]),default:o(()=>[e("div",me,[e("div",pe,[_e,e("div",he,[f.value.length>0?(s(),w(V,{key:0,onClick:c[1]||(c[1]=n=>g.value=!0),c:"bg-white border ",class:"w-40 flex items-center justify-center mr-2 h-10"},{default:o(()=>[fe,_(" Delete Selected ")]),_:1})):v("",!0),a(V,{onClick:A,class:"w-40 flex items-center justify-center h-10"},{default:o(()=>[ve,_(" Add Requirement ")]),_:1})])]),h.requirements.data.length>0?(s(),w(I,{key:0,headers:["","Name","Template",""]},{default:o(()=>[(s(!0),r(b,null,$(h.requirements.data,n=>(s(),r("tr",{class:"divide-x divide-gray-200",key:n},[a(B,{c:"whitespace-nowrap align-center text-center text-sm items-center  font-medium text-gray-900"},{default:o(()=>[U(e("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>f.value=p),value:n.id,type:"checkbox",class:"h-4 w-4 accent-green-600 text-white rounded border-gray-200"},null,8,ge),[[le,f.value]])]),_:2},1024),a(B,{class:"uppercase"},{default:o(()=>[_(y(n.name),1)]),_:2},1024),a(B,{class:"whitespace-normal"},{default:o(()=>[n.files.length>0?(s(),r("div",xe,[(s(!0),r(b,null,$(n.files,p=>(s(),r("div",{class:"mb-1",key:p,file:p},[e("a",{target:"_blank",href:p.file_url,class:"cursor-pointer bg-gray-300 hover:bg-blue-600 hover:text-white text-gray-800 py-2 px-4 rounded inline-flex items-center"},[ye,e("span",be,y(p.file_name),1)],8,ke)],8,we))),128))])):(s(),r("div",Se,"None"))]),_:2},1024),a(B,{class:"flex items-center justify-center"},{default:o(()=>[a(z,{disabled:f.value.length>0,class:"max-w-40",onClick:p=>E(n)},{default:o(()=>[Ce,Be]),_:2},1032,["disabled","onClick"])]),_:2},1024)]))),128))]),_:1})):(s(),w(J,{key:1,class:"flex items-center justify-center h-64"})),l.$props.requirements.links.length>0?(s(),r("div",Me,[l.$props.requirements.data.length>0?(s(),w(K,{key:0,class:"block",links:l.$props.requirements.links},null,8,["links"])):v("",!0)])):v("",!0)]),a(O,{transition:"slide-down",persistent:!0,isOpen:i.value},{default:o(()=>[e("main",qe,[e("div",ze,[je,e("div",$e,[a(Q,{type:"email",modelValue:u(t).name,"onUpdate:modelValue":c[3]||(c[3]=n=>u(t).name=n)},null,8,["modelValue"])]),l.$page.props.errors.name?(s(),r("p",Te,y(l.$page.props.errors.name),1)):v("",!0)]),u(t).files.length>0?(s(),r("div",Ve,[e("div",Fe,[(s(!0),r(b,null,$(u(t).files,n=>(s(),r("div",{onClick:p=>R(n),key:n,class:"hover:scale-105 transition-all cursor-pointer ease-in-out mb-2 center relative inline-block select-none whitespace-nowrap rounded-lg bg-gradient-to-tr from-gray-700 to-gray-800 py-2 px-3.5 align-baseline font-sans text-xs font-bold uppercase leading-none text-white","data-dismissible":"chip"},[e("div",Ue,y(n.file_name),1),Ne],8,Oe))),128))])])):v("",!0),u(t).id!=null?(s(),r("div",De,[He,e("div",Ae,[a(N,{onUploadSuccess:C,onUploadStart:c[4]||(c[4]=n=>S.value=!0),onUploadFinish:C,model_id:u(t).id},null,8,["model_id"])])])):v("",!0),e("div",Ee,[a(z,{onClick:L},{default:o(()=>[_(" Close ")]),_:1}),u(t).id==null?(s(),w(F,{key:0,onClick:G,processing:u(t).processing},{default:o(()=>[_(" Save")]),_:1},8,["processing"])):(s(),w(F,{key:1,onClick:P,processing:u(t).processing},{default:o(()=>[_(" Update")]),_:1},8,["processing"]))])])]),_:1},8,["isOpen"]),a(O,{transition:"slide-down",persistent:!0,isOpen:g.value},{default:o(()=>[e("main",Le,[Re,e("div",Ge,[a(W,{onClick:Y,processing:x.value,class:"w-24"},{default:o(()=>[_(" Yes ")]),_:1},8,["processing"]),a(z,{onClick:c[5]||(c[5]=n=>g.value=!1),c:"w-24"},{default:o(()=>[_(" No ")]),_:1})])])]),_:1},8,["isOpen"])]),_:1}),a(Z,{persistent:!0,isOpen:S.value,width:"260"},{default:o(()=>[e("div",Pe,[a(X,{size:"24",class:"text-green-900 mr-8",color:"green",circle:""}),Ye])]),_:1},8,["isOpen"])],64)}}});export{Xe as default};
